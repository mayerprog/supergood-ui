"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2485],{96936:function(e,t,o){var n,i=o(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),n||(n=i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 15-6-6-6 6",vectorEffect:"non-scaling-stroke"})))}},3582:function(e,t,o){o.d(t,{i:function(){return d},A:function(){return c}});var n=o(52322),i=o(10800),l=o(2784),r=o(97253);let a={BAR:"absolute pointer-events-none flex justify-center items-center bg-blue-600",NUMBER:"bg-blue-600 text-white text-sm font-semibold px-1.5 py-1 rounded-lg"};function d(e){let{top:t,left:o,subjectDimensions:l,stageDimensions:d,flowDimensions:c}=e,u=c?c.width/d.width:1,v=c?c.height/d.height:1,p=o*d.width+l.width/2,f=t*d.height+l.height/2,h=f-l.height/2,m=d.height-h-l.height,g=p-l.width/2,y=d.width-g-l.width;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,i.cn)(a.BAR,"w-0.5"),style:{height:h,top:0,left:p-1,...(0,r.m)(r.KN.EditorGrid)},children:(0,n.jsx)(s,{len:h,scale:v})}),(0,n.jsx)("div",{className:(0,i.cn)(a.BAR,"w-0.5"),style:{height:m,bottom:0,left:p-1,...(0,r.m)(r.KN.EditorGrid)},children:(0,n.jsx)(s,{len:m,scale:v})}),(0,n.jsx)("div",{className:(0,i.cn)(a.BAR,"h-0.5"),style:{width:g,left:0,top:f-1,...(0,r.m)(r.KN.EditorGrid)},children:(0,n.jsx)(s,{len:g,scale:u})}),(0,n.jsx)("div",{className:(0,i.cn)(a.BAR,"h-0.5"),style:{width:y,right:0,top:f-1,...(0,r.m)(r.KN.EditorGrid)},children:(0,n.jsx)(s,{len:y,scale:u})})]})}function s(e){let{len:t,scale:o}=e;return t<10?null:(0,n.jsx)("div",{className:a.NUMBER,children:Math.ceil(t*o)})}function c(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[o,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(t)return window.addEventListener("keydown",o),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",i)};function o(t){t.key===e&&n(!0)}function i(t){t.key===e&&n(!1)}},[t,e]),o}("Alt",e);return t}},80228:function(e,t,o){o.d(t,{Z:function(){return W}});var n,i=o(52322),l=o(10800),r=o(33919),a=o(25237),d=o.n(a),s=o(2784),c=o(53476),u=o(48580),v=o(54534),p=o(12625),f=o(67266),h=o(3846),m=o(66120),g=o(34002),y=o(97253),b=o(72369),w=o(69905);function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var C=function(e){return s.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),n||(n=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14m-9-5-5 5m5 5-5-5",vectorEffect:"non-scaling-stroke"})))},E=o(79984),S=o(96936),j=o(27377),N=o(39232);function k(e){var t;let{hotspot:o,showPlay:n,navCaptionClickNext:r,navCaptionClickPrev:a,replay:d}=e,{flow:c,activeStep:p,customValues:f}=(0,v.u)(),{buttonBgColor:h,buttonFgColor:x}=(0,s.useMemo)(()=>(0,m.q)(c),[c]),k=(null==o?void 0:o.label)||"",A=(null==o?void 0:o.bgColor)||h,F=(null==o?void 0:o.textColor)||x,H=(0,s.useRef)(null),[M,P]=(0,s.useState)(0),[O,T]=(0,s.useState)(!1),I=(0,s.useMemo)(()=>c.steps.filter(l.isNonEmptyStep),[c.steps]),R=I.findIndex(e=>e.id===(null==p?void 0:p.id)),L=!(0===k.length||!H.current||(null===(t=H.current)||void 0===t?void 0:t.clientHeight)===18);return(0,s.useEffect)(()=>{var e;L&&P(((null===(e=H.current)||void 0===e?void 0:e.clientHeight)||0)+18)},[k,O,L]),(0,s.useEffect)(()=>{if(!L){T(!1);return}T(!0);let e=setTimeout(()=>{T(!1)},2e3);return()=>clearTimeout(e)},[p,L]),(0,i.jsxs)("div",{...(0,g.v)("Caption"),className:(0,l.cn)("absolute -bottom-10 left-0 right-0 h-10 w-full transition-all ease-jelly duration-200 flex justify-center rounded-b-lg select-none",{"items-start":!O,"items-center":O}),style:{backgroundColor:A,color:F,zIndex:(0,y.LM)(y.KN.Caption),height:O?M:b.BROWSER_BAR_OR_CAPTION_HEIGHT},onMouseOver:()=>{!(0,u.tq)()&&L&&T(!0)},onMouseLeave:()=>{!(0,u.tq)()&&L&&T(!1)},onClick:()=>{(0,u.tq)()&&L&&T(!O)},children:[(0,i.jsx)("div",{className:(0,l.cn)("absolute w-7 h-5 flex items-center justify-center -top-5 rounded-t-lg cursor-pointer",{hidden:!L}),style:{backgroundColor:A,color:F},children:(0,i.jsx)(S.Z,{className:(0,l.cn)("w-4 h-4 transition-all ease-jelly duration-300 origin-center translate-y-[1px]",{"!rotate-180":O})})}),(0,i.jsx)("div",{className:"flex-none font-semibold text-xs h-10 w-12 flex items-center justify-center",children:"".concat(R+1,"/").concat(I.length)}),(0,i.jsxs)("div",{className:(0,l.cn)("flex-grow h-10 py-[10px] relative",{"flex items-center":O,"h-10 overflow-hidden":!O}),children:[(0,i.jsx)("div",{className:(0,l.cn)("absolute bottom-0 right-0 left-0 w-full h-3 select-none pointer-events-none transition-all ease-jelly duration-200 z-10",{"opacity-0 translate-y-4":O,"opacity-50":!O}),style:{backgroundColor:A}}),(0,i.jsx)("div",{ref:H,className:(0,l.cn)("relative text-sm select-none leading-[18px] transition-transform ease-jelly duration-300",{"h-5":0===k.length,"translate-y-[1px]":!O}),children:(0,i.jsx)(w.default,{markdown:(0,l.withCustomVariables)(k,c.customVariables,f),preventLineBreaks:!0})})]}),(0,i.jsx)("div",{className:(0,l.cn)("w-10 h-10 flex-none opacity-50 flex items-center justify-center",{"cursor-pointer opacity-100":R>0}),onClick:()=>{R>0&&a()},children:(0,i.jsx)(C,{className:"h-6 w-6"})}),(0,i.jsx)("div",{className:"w-10 h-10 cursor-pointer flex-none flex items-center justify-center",onClick:()=>{R+1!==I.length?r():d()},children:n?(0,i.jsx)(j.Z,{className:"h-5"}):R+1!==I.length?(0,i.jsx)(E.Z,{className:"h-6 w-6"}):(0,i.jsx)(N.Z,{className:"h-5 w-5"})})]})}var A=o(3582),F=o(62202),H=o(28405);let M=d()(()=>Promise.all([o.e(8573),o.e(6691),o.e(2251),o.e(644)]).then(o.bind(o,90644)),{loadableGenerated:{webpack:()=>[90644]}}),P=d()(()=>Promise.all([o.e(8573),o.e(2251),o.e(5995)]).then(o.bind(o,5995)),{loadableGenerated:{webpack:()=>[5995]}}),O=d()(()=>Promise.all([o.e(4424),o.e(864),o.e(8573),o.e(6691),o.e(8358),o.e(8052)]).then(o.bind(o,98052)),{loadableGenerated:{webpack:()=>[98052]}}),T=d()(()=>Promise.all([o.e(4424),o.e(864),o.e(8573),o.e(8358),o.e(4895)]).then(o.bind(o,24895)),{loadableGenerated:{webpack:()=>[24895]}}),I=s.memo(function(e){let{hotspots:t,inEditMode:o,tracker:n,isZoomActive:r,stageRef:a,panAndZoomHotspotsRef:d,hotspotTippyRef:p,isInspectorDirty:f}=e,m=(0,c.sJ)(h.H.stageDimensions),g=(0,c.sJ)(h.H.selectedHotspot),{isScreenSizeSmall:y}=(0,c.sJ)(h.H.mobileInfo),b=(0,c.sJ)(h.H.viewerDemoMode),{activeStep:w}=(0,v.u)(),x=(0,s.useMemo)(()=>b&&t.length>0&&!t.some(e=>{var o;return e.targetId!==(null===(o=t[0])||void 0===o?void 0:o.targetId)}),[b,t]);return(0,i.jsx)("div",{ref:d,className:(0,l.cn)("".concat(H.gq," relative select-none flex w-full h-full overflow-hidden"),{"cursor-pointer":x}),onClick:x?()=>!e.inEditMode&&e.onHotspotClick(t[0]):void 0,onDoubleClick:t=>{if(g||!o||!a.current)return;let n=a.current.getBoundingClientRect();if(!n)return;let{x:i,y:r}=(0,u.BD)(t.clientX,t.clientY,m,{top:n.top,left:n.left}),d={x:(0,u.jz)(i,m),y:(0,u.OW)(r,m)};(0,l.isVideoStep)(w)?e.splitVideo(d):e.addHotspot({coords:d})},onContextMenu:async e=>{let t=e.target;(0,l.isImageStep)(w)&&o&&t.classList.contains(H.gq)&&(e.preventDefault(),await (0,u.wg)(w.url)&&F.ZP.success("Image copied to clipboard"))},children:t.filter(e=>(!e.x||!(e.x<0))&&(!e.y||!(e.y<0))).sort(l.sortHotspotsForAnimation).map((t,l)=>{let d={key:l,callout:t,stageRef:a,displayAsCaption:y,isZoomActive:r,hotspotTippyRef:p},s={key:l,hotspot:t,displayAsCaption:y,stageRef:a,isZoomActive:r,hotspotTippyRef:p};return"callout"!==t.style||t.calloutArrowDirection&&"none"!==t.calloutArrowDirection?o?(0,i.jsx)(O,{...s,inEditMode:o,tracker:n,updateHotspot:e.updateHotspot,updateCurrentHotspot:e.updateCurrentHotspot,deleteHotspot:e.deleteHotspot,setGridPos:e.setGridPos,isInspectorDirty:f}):(0,i.jsx)(T,{...s,inEditMode:o,tracker:n,navigationElementWithSound:e.navigationElementWithSound,enterNavigationElement:e.enterNavigationElement,leaveNavigationElement:e.leaveNavigationElement,onHotspotClick:e.onHotspotClick}):o?(0,i.jsx)(M,{...d,inEditMode:o,tracker:n,updateCallout:e.updateHotspot,updateCurrentCallout:e.updateCurrentHotspot,deleteCallout:e.deleteHotspot,setGridPos:e.setGridPos,isInspectorDirty:f}):(0,i.jsx)(P,{...d,inEditMode:o,tracker:n,navigationElementWithSound:e.navigationElementWithSound,enterNavigationElement:e.enterNavigationElement,leaveNavigationElement:e.leaveNavigationElement,onCalloutClick:e.onHotspotClick})})})});var R=o(45203);let L=d()(()=>Promise.all([o.e(864),o.e(1325),o.e(7031),o.e(9898),o.e(8296)]).then(o.bind(o,80372)),{loadableGenerated:{webpack:()=>[80372]}}),V=d()(()=>Promise.all([o.e(4424),o.e(4872),o.e(1414)]).then(o.bind(o,1414)),{loadableGenerated:{webpack:()=>[1414]}}),B=d()(()=>o.e(4664).then(o.bind(o,44664)),{loadableGenerated:{webpack:()=>[44664]}}),G=d()(()=>Promise.all([o.e(5338),o.e(9744)]).then(o.bind(o,39744)),{loadableGenerated:{webpack:()=>[39744]}}),Z=d()(()=>Promise.all([o.e(903),o.e(191)]).then(o.bind(o,191)),{loadableGenerated:{webpack:()=>[191]}});var W=e=>{var t,o,n,a,d,b,w,x,C,E,S,j;let{flow:N,flowDimensions:F,isWatermarkDisplayed:H=!0,inEditMode:M,disableCTA:P=!1,disableNavigation:O=!0,disableTracking:T=!1,tracker:W,stageRef:z,children:D,isInspectorDirty:K=!1,registerActiveVideo:U,registerActiveVoiceover:_,onClickStage:q}=e,J=(0,s.useRef)(!1),Y=(0,s.useRef)(null),X=(0,s.useRef)(null),{hasBackground:Q,hasWrapper:$,activeStep:ee,dispatch:et}=(0,v.u)(),eo=(0,c.sJ)(h.H.stageDimensions),[en,ei]=(0,s.useState)(null),el=(0,c.Zl)(h.H.firstStepContentIsReady),er=(0,c.sJ)(h.H.isStageHeightConstrainedByWindowHeight),{renderedSteps:ea,renderedInteractiveSteps:ed,onPreloadStep:es,onLoadStep:ec}=(0,f.ZP)({steps:N.steps,activeStep:ee}),eu=(0,s.useCallback)(e=>{ec(e),el(!0)},[el,ec]),[ev,ep]=(0,c.FV)(h.H.zoomPreviewOn),[ef,eh]=(0,c.FV)(h.H.mouseIsOnTopOfHotspot),em=(0,c.sJ)(h.H.isFullscreen),eg=null!=ee?ee:N.steps[0],ey=(0,s.useCallback)(e=>{var t;return(null===(t=(0,l.getFirstNonEmptyStep)(N.steps))||void 0===t?void 0:t.id)===e},[N.steps]),eb=(0,s.useMemo)(()=>(0,l.isMediaStep)(eg)&&eg.hotspots?eg.hotspots[0]:void 0,[eg]);(0,s.useEffect)(()=>{J.current||ey(eg.id)||(J.current=!0)},[eg.id,ey]);let{isScreenSizeSmall:ew,isMobile:ex}=(0,c.sJ)(h.H.mobileInfo),{buttonBgColor:eC}=(0,s.useMemo)(()=>(0,m.q)(N),[N]),eE=(0,s.useMemo)(()=>(0,f.IY)(N.steps).filter(e=>!e.hiddenFromNavigation),[N.steps]),eS=(0,l.isMediaStep)(ee)?ee.panAndZoom:void 0,ej=!!(null==eS?void 0:eS.enabled),{zoomIn:eN,zoomOut:ek,zoomBox:eA,isZoomActive:eF,stageScope:eH,hotspotsScope:eM}=(0,p.N)({position:{x:null!==(w=null==eb?void 0:eb.x)&&void 0!==w?w:0,y:null!==(x=null==eb?void 0:eb.y)&&void 0!==x?x:0,left:null==eS?void 0:null===(t=eS.position)||void 0===t?void 0:t.left,top:null==eS?void 0:null===(o=eS.position)||void 0===o?void 0:o.top},containerDimensions:{width:eo.width,height:eo.height},zoomLevel:null!==(C=null==eS?void 0:eS.zoomLevel)&&void 0!==C?C:1.5,triggerOnChange:ee,shouldZoom:ej&&(!M||ev),easing:null!==(E=null==eS?void 0:eS.easing)&&void 0!==E?E:"Gentle",delay:M?0:null!==(S=null==eS?void 0:eS.delay)&&void 0!==S?S:0}),eP=(0,s.useCallback)(e=>{var t,o;let{clientX:n,clientY:i}=e;if("undefined"==typeof document)return;let l=null===(t=(o=document).elementsFromPoint)||void 0===t?void 0:t.call(o,n,i),r=(null==l?void 0:l.length)&&l.slice(0,10).find(e=>e instanceof HTMLElement&&"mouseoverOverrideEnabledOnPanandzoom"in e.dataset);if(r){eh(!0);return}eh(!1)},[eh]),eO=(0,s.useMemo)(()=>(0,l.getBackgroundStep)(eg,N.steps),[eg,N.steps]),eT=N.steps.some(l.isVideoStep),eI=(0,l.isVideoStep)(ee),eR=eI||(0,l.isVideoStep)(eO);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{ref:z,...(0,g.v)("flow-presenter"),className:(0,l.cn)("relative group flex w-full h-full backdrop-blur-0 overflow-hidden",{"rounded-b-lg":M&&$,"rounded-lg":!ew&&!ex&&!$,"border border-[rgba(0,0,0,0.1)]":!ew&&!ex&&!$&&!Q}),onClick:e=>{q&&q(e),ej&&(e.stopPropagation(),eF&&ej&&!M?ek():eN())},onMouseMove:e=>M&&eP(e),children:[(0,i.jsxs)("div",{ref:eH,className:(0,l.cn)("absolute select-none z-0 flex w-full h-full",{"overflow-hidden":!ew&&!ex&&!$,"overflow-hidden rounded-b-lg":M&&$,"overflow-hidden rounded-lg":M&&!$}),children:[(0,i.jsxs)("div",{className:(0,l.cn)("relative flex w-full h-full",{"overflow-hidden":!$&&(Q&&!ew||M)}),style:{zIndex:M?"":"-1"},children:[!M&&e.isUploadPreview&&eT?(0,i.jsx)("div",{className:(0,l.cn)("flex h-full w-full overflow-hidden absolute top-0 left-0 right-0 bottom-0 cursor-pointer",{"opacity-100":!eR,"opacity-0 -z-10 hidden":!eR,"rounded-lg":!$&&!ew,"rounded-b-lg":$&&!ew}),style:(0,y.i8)(y.KN.TargetForVideo),children:(0,i.jsx)("div",{className:(0,l.cn)("relative w-full h-full group/wrapper overflow-hidden pointer-events-none"),"aria-hidden":!0,children:(0,i.jsx)("video",{ref:(0,l.isVideoStep)(ee)?U:null,className:(0,l.cn)("w-full cursor-pointer flex h-full object-cover min-w-full max-h-full relative"),style:(0,y.i8)(y.KN.TargetForVideo),src:N.steps.find(l.isVideoStep).url,preload:"metadata",playsInline:!0,poster:(0,l.isVideoStep)(ee)?ee.videoThumbnailUrl:void 0,onCanPlayThrough:()=>el(!0)})})}):null,ea.map(t=>{var o,n,a,d,s,c,u,v,p,f,h,m,g,b,w,x,C,E,S,j,k;let A=N.steps.findIndex(e=>e.id===t.id),F=t.id===eg.id,H=t.id===(null==eO?void 0:eO.id),P=F||H;return t.type===r.StepType.Image?(0,i.jsx)(R.Z,{src:t.url,alt:(0,l.getStepName)(t,A),"aria-label":"".concat(t.id===(null===(o=ea[ea.length-1])||void 0===o?void 0:o.id)?"Last step":"Step"+A+"1",": \n                      ").concat((null===(n=t.pageContext)||void 0===n?void 0:n.title)||(null===(a=t.clickContext)||void 0===a?void 0:a.text)||(0,l.getStepName)(t,A),"\n                    "),"aria-hidden":!F,role:"region","aria-live":"polite",layout:"fill",onLoad:()=>eu(t.id),className:(0,l.cn)("absolute top-0 w-full h-full flex transition-opacity duration-0",{"-z-[99999999]":!P,"opacity-10":!P&&!J.current,"opacity-100":J.current,"!object-cover":(null===(d=t.coverAndFit)||void 0===d?void 0:d.type)&&"cover"===t.coverAndFit.type||!t.coverAndFit||!t.coverAndFit.type,"!object-contain":(null===(s=t.coverAndFit)||void 0===s?void 0:s.type)&&"fit"===t.coverAndFit.type,"!object-top":(null===(c=t.coverAndFit)||void 0===c?void 0:c.align)&&"top"===t.coverAndFit.align||(!t.coverAndFit||!t.coverAndFit.type)&&er,"!object-right":(null===(u=t.coverAndFit)||void 0===u?void 0:u.align)&&"right"===t.coverAndFit.align,"!object-bottom":(null===(v=t.coverAndFit)||void 0===v?void 0:v.align)&&"bottom"===t.coverAndFit.align,"!object-left":(null===(p=t.coverAndFit)||void 0===p?void 0:p.align)&&"left"===t.coverAndFit.align,"!object-center":(null===(f=t.coverAndFit)||void 0===f?void 0:f.align)&&"center"===t.coverAndFit.align||(!t.coverAndFit||!t.coverAndFit.type)&&!er}),style:{backgroundColor:(null!==(m=null===(h=t.coverAndFit)||void 0===h?void 0:h.bgColor)&&void 0!==m?m:em)?"black":"white"},blurhash:t.blurhash,priority:P,sizes:"(min-width: 1em) 100vw, 100vw"},"image-".concat(t.id)):t.type===r.StepType.Video?!M&&e.isUploadPreview?null:(0,i.jsx)(G,{register:F?U:void 0,"aria-hidden":!F,step:t,disableTracking:T,inEditMode:M,wrapperClassName:(0,l.cn)("w-full h-full flex absolute top-0 left-0 right-0 bottom-0 w-full cursor-pointer",{"opacity-100":!P,"opacity-0 -z-10 hidden":!P,"rounded-lg":!$&&!ew,"rounded-b-lg":$&&!ew}),videoClassName:(0,l.cn)("min-w-full max-h-full relative",{"!object-cover":(null===(g=t.coverAndFit)||void 0===g?void 0:g.type)&&"cover"===t.coverAndFit.type||!t.coverAndFit||!t.coverAndFit.type,"!object-contain":(null===(b=t.coverAndFit)||void 0===b?void 0:b.type)&&"fit"===t.coverAndFit.type,"!object-top":(null===(w=t.coverAndFit)||void 0===w?void 0:w.align)&&"top"===t.coverAndFit.align||(!t.coverAndFit||!t.coverAndFit.type)&&er,"!object-right":(null===(x=t.coverAndFit)||void 0===x?void 0:x.align)&&"right"===t.coverAndFit.align,"!object-bottom":(null===(C=t.coverAndFit)||void 0===C?void 0:C.align)&&"bottom"===t.coverAndFit.align,"!object-left":(null===(E=t.coverAndFit)||void 0===E?void 0:E.align)&&"left"===t.coverAndFit.align,"!object-center":(null===(S=t.coverAndFit)||void 0===S?void 0:S.align)&&"center"===t.coverAndFit.align||(!t.coverAndFit||!t.coverAndFit.type)&&!er}),videoStyle:{backgroundColor:(null!==(k=null===(j=t.coverAndFit)||void 0===j?void 0:j.bgColor)&&void 0!==k?k:em)?"black":"white"},onCanPlayThrough:()=>eu(t.id),zIndexStyle:(0,y.i8)(y.KN.TargetForVideo)},"video-".concat(t.id)):void 0})]}),D]}),ed.map(t=>{let o=t.id===(null==ee?void 0:ee.id);if(t.type===r.StepType.Overlay){var n;return(0,i.jsx)(L,{className:(0,l.cn)({"overflow-hidden flex w-full h-full":!ew&&!ex&&!$}),style:{...(0,y.m)(y.KN.Overlay)},step:t,isLastStep:t.id===(null===(n=N.steps[N.steps.length-1])||void 0===n?void 0:n.id),inEditMode:M,isActive:o,"aria-hidden":!o,isSmallScreenOrTile:ew&&!M,tracker:W,...M?{updateStep:e.updateStep,overlayControlsRef:e.overlayControlsRef}:{onButtonClick:e.onButtonClick,onOverlayUrlClick:e.onOverlayUrlClick,navigationElementWithSound:e.navigationElementWithSound,enterNavigationElement:e.enterNavigationElement,leaveNavigationElement:e.leaveNavigationElement}},"overlay-".concat(t.id))}}),_?ea.concat(ed).filter(l.isNonEmptyStep).map(e=>{var t,o;return(null===(t=e.syntheticVoice)||void 0===t?void 0:t.url)?(0,i.jsx)("video",{ref:e.id===eg.id?_:void 0,src:null===(o=e.syntheticVoice)||void 0===o?void 0:o.url,className:"hidden",playsInline:!0,controls:!1,preload:"metadata"},"synthetic-voice-".concat(e.id)):null}):null,(eg.type===r.StepType.Image||eg.type===r.StepType.Video)&&(0,i.jsx)(I,{hotspots:null!==(j=eg.hotspots)&&void 0!==j?j:[],isZoomActive:M?ev:eF,stageRef:z,panAndZoomHotspotsRef:eM,hotspotTippyRef:X,isInspectorDirty:K,...M?{inEditMode:!0,tracker:W,updateHotspot:e.updateHotspot,updateCurrentHotspot:e.updateCurrentHotspot,addHotspot:e.addHotspot,splitVideo:e.onSplitVideo,deleteHotspot:e.deleteHotspot,setGridPos:ei}:{inEditMode:!1,tracker:W,onHotspotClick:e.onHotspotClick,navigationElementWithSound:e.navigationElementWithSound,enterNavigationElement:e.enterNavigationElement,leaveNavigationElement:e.leaveNavigationElement}}),(0,i.jsx)("div",{className:"_hotspot-tippy-container",ref:X,style:(0,y.m)(y.KN.HotspotTippyContainer)}),ej&&M&&(0,l.isMediaStep)(ee)&&(0,i.jsx)(Z,{flow:N,...eA,step:ee,updateStep:e.updateStep,setGridPos:ei,previewOn:ev,zoomEditorRef:Y,mouseIsOnTopOfHotspot:ef,showPreview:()=>{ep(!0),setTimeout(()=>ep(!1),2500)}}),M&&en?(0,i.jsx)(A.i,{stageDimensions:eo,flowDimensions:F,...en}):null,(0,l.isNonEmptyStep)(eg)&&(null===(n=eg.cta)||void 0===n?void 0:n.id)&&!P&&(0,i.jsx)(V,{stepId:eg.id,tracker:W,cta:eg.cta,inEditMode:M,onReplay:()=>{let[e]=N.steps;e&&et({type:"SET_ACTIVE_STEP",id:e.id})},updateCTA:M?e.updateCTA:void 0}),!M&&(0,i.jsx)(B,{steps:eE,onPreloadStep:es,indicatorColor:eC,navToStep:e.navToStepClick,isWatermarkDisplayed:H,disableNavigation:O||!N.showFlowNavIndicator,isZoomActive:eF,enterNavigationElement:e.enterNavigationElement,leaveNavigationElement:e.leaveNavigationElement,unifiedState:e.unifiedState,unifiedControls:e.unifiedControls,tracker:W,updateSound:e.updateSound})]}),ew&&!M&&(0,i.jsx)(k,{hotspot:(0,l.isMediaStep)(ee)?ee.hotspots?ee.hotspots[0]:{label:""}:(0,l.isOverlayStep)(ee)?(0,l.isOverlayStepWithPaths)(ee)?{label:"",bgColor:null===(a=ee.paths[0])||void 0===a?void 0:a.buttonColor,textColor:(null===(d=ee.paths[0])||void 0===d?void 0:d.buttonColor)?(0,u.pK)(null===(b=ee.paths[0])||void 0===b?void 0:b.buttonColor):void 0}:{label:"",bgColor:ee.buttonColor,textColor:ee.buttonColor?(0,u.pK)(ee.buttonColor):void 0}:void 0,navCaptionClickNext:e.navCaptionClickNext,navCaptionClickPrev:e.navCaptionClickPrev,replay:e.replay,showPlay:"ALL"===e.navigationElementWithSound})]})}},67266:function(e,t,o){o.d(t,{IY:function(){return p},ZP:function(){return d}});var n=o(10800),i=o(33919),l=o(18149),r=o.n(l),a=o(2784);function d(e){let{steps:t,activeStep:o,skip:i=!1,depth:l=2}=e,r=(0,a.useMemo)(()=>p(t),[t]),d=(0,a.useMemo)(()=>u(t,l),[t,l]),[v,f]=(0,a.useMemo)(()=>[s(d,o),c(d,o)],[d,o]),[h,m]=(0,a.useState)(new Set),g=(0,a.useCallback)(e=>{(0,n.isMediaStep)(e)&&m(t=>t.has(e.id)?t:new Set(t).add(e.id))},[m]),[y,b]=(0,a.useState)(new Set),w=(0,a.useCallback)(e=>{b(t=>t.has(e)?t:new Set(t).add(e))},[b]),x=(0,a.useMemo)(()=>r.find(e=>(0,n.isMediaStep)(e)&&!y.has(e.id)),[r,y]);(0,a.useEffect)(()=>{x&&g(x)},[x,g]);let C=(0,a.useMemo)(()=>{let e=new Map;for(let t of v)(0,n.isMediaStep)(t)&&!e.has(t.id)&&e.set(t.id,t);for(let t of[...y,...h])if(!e.has(t)){let o=r.find(e=>e.id===t);o&&e.set(t,o)}return o&&(0,n.isMediaStep)(o)&&e.set(o.id,o),Array.from(e.values())},[o,v,r,h,y]);return{renderedSteps:i?[]:C,renderedInteractiveSteps:f,onPreloadStep:g,onLoadStep:w}}let s=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return[];let n=e[t.id];return n?o?n.after:[...n.after,...n.before]:[]},c=(e,t)=>{if(!t)return[];let o=e[t.id];if(!o)return[];let n=[o.before.find(e=>e.type===i.StepType.Overlay),o.step].filter(e=>(null==e?void 0:e.type)===i.StepType.Overlay);return n},u=(e,t)=>{if(!t||!e.length)return{};let o={},n=e=>(o[e.id]||(o[e.id]={step:e,before:new Set,after:new Set}),o[e.id]);return e.forEach(o=>{let i=n(o),l=v(e,o,t);l.forEach(e=>{let t=n(e);r()(e,o)||(i.after.add(e),t.before.add(o))})}),Object.values(o).forEach(e=>{e.after.forEach(t=>{e.before.delete(t)})}),Object.keys(o).reduce((e,t)=>{let n=o[t];return n&&(e[t]={step:n.step,before:Array.from(n.before).reverse(),after:Array.from(n.after)}),e},{})},v=(e,t,o)=>{let i=new Map,l=[t.id];for(let r=0;r<=o;r++){let a=new Set;l.forEach(l=>{let d=e.find(e=>{let{id:t}=e;return t===l});if(d&&(t.id!==l&&i.set(l,d),r<o)){let t=(0,n.getAllNextNonEmptySteps)(e,d);t.forEach(e=>{a.add(e.id)})}}),l=Array.from(a)}return Array.from(i.values()).filter(e=>(0,n.isVideoStep)(e)?!e.videoProcessing:(0,n.isNonEmptyStep)(e))},p=e=>{let t=new Set((0,n.getStepOrder)(e,e.length*e.length).map(e=>e.id));return e.filter(e=>(0,n.isNonEmptyStep)(e)&&t.has(e.id))}},66120:function(e,t,o){o.d(t,{q:function(){return l}});var n=o(10800),i=o(38078);let l=e=>{if(e){for(let t of e.steps)if((0,n.isMediaStep)(t)&&t.hotspots){for(let e of t.hotspots)if(e&&e.bgColor)return{buttonBgColor:e.bgColor,buttonFgColor:e.textColor||i.defaultUserPrefs.textColor}}}return{buttonBgColor:i.defaultUserPrefs.bgColor,buttonFgColor:i.defaultUserPrefs.textColor}}},52448:function(e,t,o){o.d(t,{S1:function(){return l},ZT:function(){return n},jU:function(){return r},on:function(){return i}});var n=function(){};function i(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function l(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var r="undefined"!=typeof window},72489:function(e,t,o){var n=o(2784),i=o(52448).jU?n.useLayoutEffect:n.useEffect;t.Z=i}}]);