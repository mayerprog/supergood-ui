"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4664],{29862:function(e,t,n){n.d(t,{t:function(){return a}});var r=n(2784);function a(e){void 0===e&&(e=!1);var t=(0,r.useRef)(e),n=(0,r.useCallback)(function(){return t.current},[]);return(0,r.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]),n}},95669:function(e,t,n){n.d(t,{v:function(){return u}});var r=n(2784),a=n(77246),l=n(29862),o=n(16303),i=function(e,t,n){if(n||2==arguments.length)for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},s=n(24947).jU?window:null;function u(e,t,n,u){void 0===u&&(u={});var c=u.event,d=u.target,p=u.eventOptions,f=(0,a.x)(t);!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s=(0,l.t)(),u=(0,a.x)(t[1]),c=(0,r.useMemo)(function(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s()&&("function"==typeof u.current?u.current.apply(this,e):"function"==typeof u.current.handleEvent&&u.current.handleEvent.apply(this,e))}},[]);(0,r.useEffect)(function(){var n=e&&(0,o.nr)(e,"current")?e.current:e;if(n){var r=t.slice(2);return n.addEventListener.apply(n,i([t[0],c],r,!1)),function(){return n.removeEventListener.apply(n,i([t[0],c],r,!1))}}},[e,t[0]])}(void 0===d?s:d,void 0===c?"keydown":c,(0,r.useMemo)(function(){var t="function"==typeof e?e:"string"==typeof e?function(t){return t.key===e}:e?o.cI:o.Vp;return function(e){t(e)&&f.current.call(this,e)}},n),p)}},16303:function(e,t,n){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}n.d(t,{S1:function(){return a},Vp:function(){return i},cI:function(){return o},nr:function(){return l},on:function(){return r}});var l=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o=function(){return!0},i=function(){return!1}},88676:function(e,t,n){var r,a,l=n(2784);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return l.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},e),r||(r=l.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#autoplay_svg__a)"},l.createElement("path",{fill:"currentColor",d:"m8.29 6.83 2.7 1.7c.35.2.35.73 0 .95l-2.7 1.7c-.35.21-.79-.06-.79-.48V7.3c0-.42.44-.7.79-.47Z",vectorEffect:"non-scaling-stroke"}),l.createElement("path",{d:"M12.86 5.41h3.16V2.25",vectorEffect:"non-scaling-stroke"}),l.createElement("path",{d:"M16.5 9a7.5 7.5 0 1 1-.91-3.59",vectorEffect:"non-scaling-stroke"}))),a||(a=l.createElement("defs",null,l.createElement("clipPath",{id:"autoplay_svg__a"},l.createElement("path",{fill:"#fff",d:"M0 0h18v18H0z"})))))}},45374:function(e,t,n){var r,a=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9.019V11.5m5.205-3.58 1.03 2.58M6.8 7.91 5.764 10.5M21 5c-2.427 2.397-5.65 3.733-9 3.733-3.35 0-6.573-1.336-9-3.733m.5 14h3m4 0h3m4 0h3",vectorEffect:"non-scaling-stroke"})))}},93628:function(e,t,n){var r,a,l,o=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{d:"M15.556 4H8.444A4.444 4.444 0 0 0 4 8.444v7.112A4.444 4.444 0 0 0 8.444 20h7.112A4.444 4.444 0 0 0 20 15.556V8.444A4.444 4.444 0 0 0 15.556 4z",vectorEffect:"non-scaling-stroke"})),a||(a=o.createElement("path",{d:"m12.018 14.482 3.837-3.887a2 2 0 0 1 2.847 0L20 11.91",vectorEffect:"non-scaling-stroke"})),l||(l=o.createElement("path",{d:"m4.45 17.492 3.85-3.9a1.998 1.998 0 0 1 2.84 0l6.03 6.11",vectorEffect:"non-scaling-stroke"})))}},77726:function(e,t,n){var r,a=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7H5.2c-1.12 0-1.68 0-2.1.22a2 2 0 0 0-.88.87C2 8.52 2 9.08 2 10.2v3.6c0 1.12 0 1.68.22 2.1a2 2 0 0 0 .87.88c.43.22.99.22 2.11.22H12m5-10h1.8c1.12 0 1.68 0 2.1.22a2 2 0 0 1 .88.87c.22.43.22.99.22 2.11v3.6c0 1.12 0 1.68-.22 2.1a2 2 0 0 1-.87.88c-.43.22-.99.22-2.11.22H17m0 4V3m2.5 0h-5m5 18h-5",vectorEffect:"non-scaling-stroke"})))}},27697:function(e,t,n){var r,a=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 12 12"},e),r||(r=a.createElement("path",{d:"M6 0a6 6 0 1 0 6 6 6.006 6.006 0 0 0-6-6Zm.125 2.5a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5ZM7.25 9.25h-2a.5.5 0 0 1 0-1h.375a.125.125 0 0 0 .125-.125v-2.25a.125.125 0 0 0-.125-.125H5.25a.5.5 0 0 1 0-1h.5a1 1 0 0 1 1 1v2.375a.125.125 0 0 0 .125.125h.375a.5.5 0 0 1 0 1Z",vectorEffect:"non-scaling-stroke"})))}},84079:function(e,t,n){var r,a=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e),r||(r=a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m3 15.495 8.678 4.535a.94.94 0 0 0 .239.105c.055.01.111.01.166 0 .062-.012.12-.043.239-.105L21 15.495M12.322 3.97a.94.94 0 0 0-.239-.105.43.43 0 0 0-.166 0c-.062.012-.12.043-.239.105L3 8.505l8.678 4.536a.959.959 0 0 0 .239.104.422.422 0 0 0 .166 0 .959.959 0 0 0 .239-.104L21 8.505 12.322 3.97Z",vectorEffect:"non-scaling-stroke"})))}},396:function(e,t,n){var r,a,l=n(2784);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return l.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=l.createElement("rect",{width:5.179,height:16.5,x:5,y:4,fill:"currentColor",rx:2.589})),a||(a=l.createElement("rect",{width:5.179,height:16.5,x:14.321,y:4,fill:"currentColor",rx:2.589})))}},61319:function(e,t,n){var r,a=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e),r||(r=a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m16 9.793 3.475-2.143A1 1 0 0 1 21 8.502v6.996a1 1 0 0 1-1.525.852L16 14.207M13 5.5H6a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h7a3 3 0 0 0 3-3v-7a3 3 0 0 0-3-3Z",vectorEffect:"non-scaling-stroke"})))}},73715:function(e,t,n){var r,a=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.678 3c.51 0 .984.214 1.332.601.348.388.52.893.486 1.422l-.678 8.215C13.752 14.226 12.954 15 12 15c-.954 0-1.752-.774-1.818-1.762l-.678-8.215a1.919 1.919 0 0 1 .486-1.422A1.773 1.773 0 0 1 11.322 3h1.356ZM10 19c0-1.103.897-2 2-2s2 .897 2 2-.897 2-2 2-2-.897-2-2Z",clipRule:"evenodd",vectorEffect:"non-scaling-stroke"})))}},49864:function(e,t,n){n.d(t,{U:function(){return i}});var r=n(52322),a=n(10800),l=n(27697),o=n(29497);function i(e){let{className:t,configs:n,selectedConfigId:i,onSelect:s}=e;if(!i){var u;i=null===(u=n[0])||void 0===u?void 0:u.id}return(0,r.jsx)("div",{className:(0,a.cn)("flex gap-1 items-center justify-center rounded-[10px] bg-gray-100 p-1 shrink-0",t),children:n.map(e=>{let{id:t,label:n,disabled:u,disabledTooltipText:c,containsTextInput:d,textInputValue:p,onTextInputChange:f,invalidTextInput:m,invalidTextInputTooltip:h}=e,v=t===i;return(0,r.jsx)("div",{className:(0,a.cn)("flex justify-center items-center px-3 h-8 shrink-0 rounded-lg cursor-pointer border transition-all min-w-[32px]",{"bg-white border-gray-200 hover:bg-gray-50":v,"bg-gray-100 border-gray-100 hover:bg-gray-200":!v&&!u,"bg-gray-100 border-gray-100":u}),onClick:()=>!u&&!v&&s(t),children:(0,r.jsxs)("div",{className:(0,a.cn)("flex items-center text-xs font-semibold shrink-0 text-gray-900 leading-8",{"text-gray-400":u}),children:[n,d&&v&&(0,r.jsx)(o.Z,{placement:"top",interactive:!0,appendTo:()=>document.body,maxWidth:300,text:h||"",disabled:!m||!h,visible:!0,children:(0,r.jsx)("input",{type:"url",className:(0,a.cn)("text-xs bg-transparent max-w-md border-0 outline-none focus:outline-none focus:ring-0",m?"text-critical-action":"text-gray-900"),value:p,onChange:e=>{null==f||f(e.target.value)},placeholder:"https://example.com",autoFocus:!0})}),u&&c&&(0,r.jsx)(o.Z,{placement:"top",interactive:!0,appendTo:()=>document.body,maxWidth:300,text:c,children:(0,r.jsx)("div",{children:(0,r.jsx)(l.Z,{className:(0,a.cn)("ml-[6px] cursor-pointer transition-colors w-3 h-3 hover:text-gray-700 text-gray-500")})})})]})},t)})})}},95131:function(e,t,n){n.d(t,{A:function(){return a}});var r,a,l=n(52322),o=n(23524),i=n(27697),s=n(2784),u=n(49864),c=n(14609),d=n(49143),p=n(29497);(r=a||(a={})).auto="auto",r.manual="manual";let f=e=>{let{delay:t,onChange:n}=e,[r,a,i]=(0,c.A)(String(t/1e3),(0,s.useCallback)(e=>{let t=Number(e);return!Number.isNaN(t)&&t>0?n("manual",1e3*t):null},[n]));return(0,l.jsxs)("div",{className:"h-full w-11 justify-start items-center flex pl-3 pr-1",children:[(0,l.jsx)("input",{placeholder:"0",type:"number",value:r,min:0,autoFocus:!0,onChange:a,onBlur:i,className:(0,o.cn)("w-full p-0 h-full text-gray-900 text-[12px] font-semibold bg-transparent border-none focus:ring-0","[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none")}),(0,l.jsx)("div",{className:"text-gray-500 text-xs font-medium ml-auto",children:"s"})]})};t.Z=e=>{let{delay:t,onChange:n,className:r}=e,a=void 0===t?"auto":"manual";return(0,l.jsxs)("div",{className:(0,o.cn)("justify-start items-center gap-4 inline-flex w-full",r),children:[(0,l.jsx)("div",{className:"text-gray-900 text-sm font-semibold",children:"Delay"}),(0,l.jsx)(u.U,{className:"ml-auto",selectedConfigId:a,onSelect:n,isDark:!1,configs:[{id:"auto",label:(0,l.jsxs)("div",{className:"w-12 flex items-center",children:["Auto"," ",(0,l.jsx)(p.Z,{placement:"top",maxWidth:500,text:"In Auto mode, the delay depends on the amount of text or speech in the step.",children:(0,l.jsx)("div",{className:"ml-1.5",children:(0,l.jsx)(i.Z,{className:"flex w-3 h-3 text-gray-400 hover:text-gray-700 transition-colors"})})})]})},{id:"manual",label:(0,l.jsxs)("div",{className:"flex items-center",children:["Manual","manual"===a&&(0,l.jsx)(f,{delay:t||d.k0,onChange:n})]})}]})]})}},44664:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r=n(52322),a=n(10800),l=n(2784),o=n(53476),i=n(48580),s=n(54534),u=n(54554),c=n(3846),d=n(16819),p=n(97253),f=n(59147),m=n.n(f),h=n(33919),v=n(95669),g=n(50355),y=n(396),x=n(27377),b=n(9587),w=n(49143),j=n(60097),k=n(59489),N=n(32183),E=n(23500),S=n(34904);function C(e){var t;let{hasSteps:n,hasControls:d,steps:f,unifiedState:{status:m,time:g,duration:w,everPlayed:E,ended:C,playbackRate:O},unifiedControls:{pause:Z,play:R,seek:L,updatePlaybackRate:V},updateSound:F,tracker:A,...B}=e,{activeStep:_,activeStepIndex:z,flow:H}=(0,s.u)(),D=(0,l.useRef)(null),[W,K]=(0,l.useState)(!1),U=w>0?g/w:0,X=(0,o.Zl)(c.H.hideHotspots),q=(0,o.rb)(c.H.hideHotspots),J=!!H.backgroundMusicUrl,Q=(0,a.isNonEmptyStep)(_)&&!!_.syntheticVoice,$=(0,l.useCallback)((e,t)=>{(null==_?void 0:_.type)&&(null==_?void 0:_.type)!==h.StepType.Empty&&A.report(e,{stepId:_.id,stepType:_.type,isMobile:(0,i.tq)(),hasSyntheticVoice:Q,hasBackgroundMusic:J,mechanism:t})},[null==_?void 0:_.id,null==_?void 0:_.type,Q,J,A]);function G(e){e.stopPropagation();let t=m!==u.jX.Paused;function n(e,t){if(!D.current)return;e.stopPropagation();let n=(0,i.JQ)(D.current,e);null!==n&&(L({to:w*n}),t&&$("Step Scrubbed","controls"))}function r(e){n(e,!1)}function a(e){e.type.startsWith("mouse")?(window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a),document.body.removeEventListener("mouseleave",a)):(window.removeEventListener("touchmove",r),window.removeEventListener("touchend",a),window.removeEventListener("touchcancel",a)),t&&(K(!1),"mouseleave"!==e.type&&R())}t&&Z(),K(t),n(e,!0),e.type.startsWith("mouse")?(window.addEventListener("mousemove",r),window.addEventListener("mouseup",a),document.body.addEventListener("mouseleave",a)):(window.addEventListener("touchmove",r),window.addEventListener("touchend",a),window.addEventListener("touchcancel",a))}(0,v.v)(e=>"Space"===e.code,e=>{let t=e.target.nodeName;t.includes("INPUT")||t.includes("TEXTAREA")||(e.stopImmediatePropagation(),m===u.jX.Paused?(R(),$("Step Played","keyboard")):(Z(),$("Step Paused","keyboard")))},[m,R,Z]);let Y=(0,i.XS)(H.steps),ee=(0,i.tq)(),et=(null===(t=(0,a.getFirstNonEmptyStep)(H.steps))||void 0===t?void 0:t.id)===(null==_?void 0:_.id)&&(0,a.isVideoStep)(_)&&!E&&m===u.jX.Paused,{displaySteps:en,activeOrBeforeIndex:er,nextPageStep:ea,prevPageStep:el}=(0,l.useMemo)(()=>n?function(e,t,n){let r=e.length-1,a=e.findIndex(e=>t.findIndex(t=>t.id===e.id)>n),l=-1===a?r:a-1;if(e.length<=10)return{displaySteps:e,activeOrBeforeIndex:l,nextPageStep:null,prevPageStep:null};let o=[0,9];for(;o[1]<r&&!(l<=o[1]);){let e=o[1]+1,t=e+10-1;o=t>r?[r-9,r]:[e,t]}return{displaySteps:e.slice(o[0],o[1]+1),activeOrBeforeIndex:l-o[0],prevPageStep:o[0]>0?e[o[0]-1]:null,nextPageStep:o[1]<r?e[o[1]+1]:null}}(f,H.steps,z):{displaySteps:void 0,activeOrBeforeIndex:void 0,nextPageStep:void 0,prevPageStep:void 0},[n,f,H.steps,z]);return((0,l.useEffect)(()=>{var e;et&&(0,a.isVideoStep)(_)&&(null===(e=_.hotspots)||void 0===e?void 0:e.length)?X(!0):q()},[q,X,et]),n||d)?(0,r.jsxs)("div",{className:"flex w-full gap-2 md:gap-4 relative items-center justify-between",style:{zIndex:(0,p.LM)(p.KN.VideoControls)},children:[d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.A,{show:et}),(0,r.jsx)("button",{className:"text-white w-8 h-8 border-transparent bg-transparent transition-all ease-jelly flex items-center justify-center shrink-0 hover:backdrop-blur-sm hover:bg-white/20 rounded-lg",onKeyDown:e=>{"Space"===e.code&&e.stopPropagation()},onClick:e=>{e.stopPropagation(),m===u.jX.Paused?(C&&L({to:0}),R(),F(e=>e===b.E.Unset?b.E.On:e),$("Step Played","controls")):(Z(),$("Step Paused","controls"))},"aria-label":m===u.jX.Paused?"Play media":"Pause media","aria-hidden":!(0,a.isVideoStep)(_),role:"switch","aria-checked":m===u.jX.Playing,children:m!==u.jX.Paused||W?m===u.jX.Buffering?(0,r.jsx)(N.Z,{className:"shrink-0 w-8 p-1",size:20,type:k.tY.Oval,color:"white",secondaryColor:"white","aria-hidden":!0}):(0,r.jsx)(y.Z,{className:"shrink-0 w-8 p-1","aria-hidden":!0}):(0,r.jsx)(x.Z,{className:"shrink-0 w-8 p-1","aria-hidden":!0})}),(0,r.jsxs)("div",{className:"flex items-center font-semibold text-xs text-white/70 gap-1 ml-0 mr-1 md:-ml-1 md:mr-0 shrink-0 numbers",children:[(0,r.jsx)("span",{className:"text-white",children:M(g)}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{children:M(w)})]}),n?null:(0,r.jsxs)("div",{ref:D,className:"grow relative h-7 py-2 cursor-pointer",onClick:e=>e.stopPropagation(),onMouseDown:ee?void 0:G,onTouchStart:ee?G:void 0,children:[(0,r.jsx)("div",{className:"absolute left-0 top-2 h-3 w-full bg-white/30 rounded-full"}),(0,r.jsx)("div",{className:"absolute top-2 h-3 w-3 shadow-[0px_0px_0px_1px_rgba(17,24,39,0.12)] bg-white rounded-full",style:{left:"calc(".concat(100*U,"% - 0.375rem)")}})]})]}):null,en?(0,r.jsxs)("div",{className:"flex items-center gap-2 grow",children:[el?(0,r.jsx)(T,{step:el,useTouch:ee,...B}):null,en.map((e,t)=>(0,r.jsx)(P,{stepCount:f.length,playheadRef:D,onSeekBegin:G,percentComplete:U,hasControls:d,step:e,useTouch:ee,upcoming:t>er,...B},e.id)),ea?(0,r.jsx)(T,{step:ea,useTouch:ee,...B}):null]}):null,d&&Y.length>1?(0,r.jsx)(j.default,{tippyClassName:"backdrop-blur-sm bg-gray-900/60 shadow-none rounded-[10px]",appendTo:()=>document.body,placement:"top-end",render:e=>{let{close:t}=e;return(0,r.jsx)(I,{options:Y,selected:O,onSelect:e=>{V(e),$("Playback Speed Updated","controls")},close:t})},children:e=>{let{toggle:t,isOpen:n}=e;return(0,r.jsxs)("button",{className:(0,a.cn)("text-sm font-semibold text-nowrap self-stretch h-8 min-w-[32px] px-1.5 border-transparent bg-transparent flex transition-all ease-jelly items-center justify-center shrink-0 hover:backdrop-blur-sm hover:bg-white/20 rounded-lg font-sans",{"bg-white/20 text-white backdrop-blur-sm":n,"text-white":!n}),onClick:e=>{e.stopPropagation(),t()},children:[O,(0,r.jsx)("span",{className:"flex",children:"✗"})]})}}):null]}):null}function P(e){var t;let{step:n,stepCount:l,hasControls:o,upcoming:u,indicatorColor:c,useTouch:d,percentComplete:f,playheadRef:h,onSeekBegin:v,navToStep:y,onPreloadStep:x,enterNavigationElement:b,leaveNavigationElement:w}=e,{flow:j,activeStep:k,customValues:N}=(0,s.u)(),S=(null==k?void 0:k.id)===n.id,C=(0,a.isOverlayStep)(n),P=(0,a.isOverlayStepWithPaths)(n)?null===(t=n.paths[0])||void 0===t?void 0:t.buttonColor:(0,a.isOverlayStep)(n)?n.buttonColor:void 0,T=u?C?m().gray[600]:m().white:C?null!=P?P:m().gray[600]:c,I=(0,i.pK)(T);return(0,r.jsx)(g.ZP,{placement:"top",arrow:!1,zIndex:(0,p.LM)(p.KN.FlowNavIndicator),content:o&&S?null:C&&n.title?(0,r.jsx)("div",{className:"text-sm lg:text-base xl:text-lg font-semibold px-3 py-1 text-shadow max-w-[360px] truncate font-sans",children:(0,a.withCustomVariables)(n.title,j.customVariables,N)}):(0,r.jsx)("div",{className:"flex shadow-menu rounded-lg mb-2.5 mx-3",children:(0,r.jsx)(E.ZP,{step:n,isInFlowNav:!0,isPlayable:!1,className:"w-48"})}),offset:[0,-6],appendTo:"parent",className:"!bg-transparent !p-0 [&>.tippy-content]:!p-0",animation:"shift-away",inertia:!0,children:(0,r.jsx)("div",{className:(0,a.cn)("h-9 group/scoped flex items-center cursor-pointer"),style:{flexBasis:S&&o?"".concat(100*l,"%"):"100%"},onClick:e=>{e.stopPropagation(),S||y(n)},onMouseEnter:()=>{d||S||(x(n),b(n.id))},onMouseLeave:()=>{d||S||w(n.id)},children:(0,r.jsx)("div",{onMouseDown:o&&S&&!d?v:void 0,onTouchStart:o&&S&&d?v:void 0,className:(0,a.cn)("h-1 w-full rounded-full transition-all duration-200 ease-jelly group-hover/scoped:h-3 relative",{"h-3":S,"opacity-100":!u,"opacity-60":u&&!C,"opacity-70":u&&C}),style:{backgroundColor:T},children:o&&S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute opacity-0 top-0 left-0 w-full user-select-none pointer-events-none",ref:h}),(0,r.jsx)("div",{className:"absolute top-0 h-3 w-3 shadow-[0px_0px_0px_1px_rgba(17,24,39,0.12)] rounded-full",style:{left:"calc(".concat(100*f,"% - 0.375rem)"),backgroundColor:I}})]}):null})})})}function T(e){let{step:t,useTouch:n,navToStep:l,onPreloadStep:o,enterNavigationElement:i,leaveNavigationElement:s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("h-9 group/scoped flex items-center cursor-pointer"),onClick:e=>{e.stopPropagation(),l(t)},onMouseEnter:()=>{n||(o(t),i(t.id))},onMouseLeave:()=>{n||s(t.id)},children:(0,r.jsx)("div",{className:(0,a.cn)("h-1 w-full flex items-center justify-between gap-1 transition-all duration-200 ease-jelly opacity-60 group-hover/scoped:opacity-100 relative"),children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"rounded-full h-1 w-1 flex-1 bg-white"},"dot-".concat(e)))})})}function I(e){let{options:t,selected:n,onSelect:i,close:s}=e,u=(0,o.sJ)(c.H.showFlowNavIndicator);return(0,l.useEffect)(()=>{u||s()},[u,s]),(0,r.jsx)("div",{className:"flex flex-row sm:flex-col gap-1 p-1 font-sans pointer-events-auto",children:t.map(e=>(0,r.jsx)("button",{onClick:()=>{e!==n&&i(e),s()},className:(0,a.cn)("p-2 sm:pr-5 rounded-lg text-left font-semibold text-sm transition-all ease-jelly",{"bg-white shadow-menu":e===n,"bg-transparent hover:bg-white/20 text-white":e!==n}),children:e===w.mw?"Normal":"".concat(e,"✗")},"playback-rate-".concat(e)))})}function O(e){return"".concat(e>=10?"":"0").concat(e)}function M(e){return"".concat(O(Math.floor(e/60)),":").concat(O(Math.floor(e%60)))}function Z(e){var t;let{steps:n,disableNavigation:f,isWatermarkDisplayed:m,isZoomActive:h,unifiedState:v,...g}=e,y=(0,o.sJ)(c.H.zoomBox),x=(0,o.sJ)(c.H.stageDimensions),[b,w]=(0,o.FV)(c.H.showFlowNavIndicator),[j,k]=(0,l.useState)(!1),[N,E]=(0,l.useState)(!1),{flow:S,hasWrapper:P,activeStep:T}=(0,s.u)(),{isScreenSizeSmall:I}=(0,o.sJ)(c.H.mobileInfo);(0,l.useEffect)(()=>{if(v.status===u.jX.Buffering){let e=setTimeout(()=>E(!0),500);return()=>{clearTimeout(e),E(!1)}}},[v.status]);let O=(0,d.FQ)(T),M=(null===(t=(0,a.getFirstNonEmptyStep)(S.steps))||void 0===t?void 0:t.id)===(null==T?void 0:T.id)&&!v.everPlayed&&!(0,a.isVideoStep)(T),Z=O&&!M&&(v.status===u.jX.Paused||N)&&!v.ended,R=!I&&!f,L=O||R,V=(0,l.useMemo)(()=>!!(0,a.isImageStep)(T)&&T.hotspots.some(e=>{let t=h?e.y*x.height+y.top/y.zoomLevel:e.y*x.height;if("callout"!==e.style)return t/(h?y.height:x.height)>.8;{var n,r;let a="undefined"!=typeof document?null===(n=document)||void 0===n?void 0:n.getElementById(e.id):void 0,l=null==a?void 0:a.getBoundingClientRect();return((null!==(r=null==l?void 0:l.height)&&void 0!==r?r:100)+t)/(h?y.height:x.height)>.85}}),[T,h,x.height,y.height,y.top,y.zoomLevel]),F=(j||Z)&&!V;return(0,l.useEffect)(()=>{w(F)},[F,w]),L?(0,r.jsxs)("div",{className:(0,a.cn)("flow-nav-indicator flex items-center rounded-b-[7px] absolute bottom-0 left-0 right-0 transition-opacity ease duration-300 delay-75 h-20",{"pointer-events-none":V,"opacity-0":!b,"opacity-100 delay-75 duration-200":b,"!rounded-b-lg":!P,"hover:opacity-100 hover:delay-75 hover:duration-200":!I&&b,"h-10":(0,a.isOverlayStep)(T)}),onMouseEnter:()=>{(0,i.tq)()||k(!0)},onMouseLeave:()=>{(0,i.tq)()||k(!1)},style:{zIndex:(0,p.LM)(p.KN.FlowNavIndicator)},children:[(0,r.jsx)("style",{children:"\n.flow-nav-indicator [data-tippy-root] {\n          pointer-events: none !important;\n}"}),(0,r.jsx)("div",{className:(0,a.cn)("absolute bottom-0 left-0 right-0 h-[240px] bg-gradient-to-b from-transparent via-gray-900/10 to-gray-900/70 overflow-hidden pointer-events-none",{"rounded-none":I})}),(0,r.jsx)("div",{className:(0,a.cn)("w-full overflow-hidden block transition-all",{"w-[calc(100%_-_64px)]":m}),children:(0,r.jsx)("div",{className:(0,a.cn)("absolute left-0",{"right-0":!m,"right-10":m&&I,"right-16":m&&!I,"mx-4":!I,"bottom-2 mx-2":I,"bottom-3":!m&&!I,"bottom-3.5":m&&!I&&O,"bottom-1":!I&&!O}),children:(0,r.jsx)(C,{steps:n,hasSteps:R,hasControls:O,unifiedState:v,...g})})})]}):null}},60097:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(52322),a=n(10800),l=n(25237),o=n.n(l),i=n(2784),s=n(34002),u=n(3397);class c{constructor(){this.onMouseDown=e=>{let t=e.target;if(t)for(let{buttonRef:e,modalRef:a,close:l}of this.stack){let o=e.current,i=a.current;if(o&&i){var n,r;if((null===(n=o.contains)||void 0===n?void 0:n.call(o,t))||(null===(r=i.contains)||void 0===r?void 0:r.call(i,t)))return}l()}this.stack=this.stack.filter(e=>{let{buttonRef:t,modalRef:n}=e;return!!t.current&&!!n.current})},this.push=(e,t,n)=>{this.stack.unshift({buttonRef:e,modalRef:t,close:n})},this.remove=e=>{this.stack=this.stack.filter(t=>t.modalRef!==e)},this.stack=[],window.addEventListener("mousedown",this.onMouseDown,!0)}}let d=new c;var p=(e,t,n,r)=>{(0,u.x6)("Escape",{},t,!e),(0,i.useEffect)(()=>(e?d.push(n,r,t):d.remove(r),()=>{d.remove(r)}),[e,t,n,r])};let f=o()(()=>Promise.resolve().then(n.bind(n,73609)),{loadableGenerated:{webpack:()=>[73609]},ssr:!1});function m(e){let{enabled:t=!0,wrapperClassName:n,wrapperStyle:l,tippyClassName:o,allowClickPropagation:u=!1,alwaysOpen:c=!1,onClose:d,onCloseAttempt:m,render:h,children:v,placement:g,defaultOpen:y,...x}=e,[b,w]=(0,i.useState)(!!y),[j,k]=(0,i.useState)(!!y),N=(0,i.useRef)(null),E=(0,i.useRef)(null),S=(0,i.useRef)(null),C=(0,i.useCallback)(()=>{t&&(w(!0),N.current&&(clearTimeout(N.current),N.current=null),N.current=setTimeout(()=>{k(!0)},0))},[t]),P=(0,i.useCallback)(()=>{(null==m?void 0:m())!==!1&&t&&(k(!1),N.current&&(clearTimeout(N.current),N.current=null),N.current=setTimeout(()=>{w(!1),null==d||d()},100))},[m,t,d]),T=(0,i.useCallback)(()=>{b?P():C()},[P,b,C]);p(b,P,E,S),(0,i.useEffect)(()=>{c&&C()},[c,C]);let I=(0,i.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return h&&b?(0,r.jsx)("div",{ref:S,className:(0,a.cn)("rounded-lg shadow-menu overflow-hidden p-0 text-sm bg-white transition-all ease-bouncy duration-[240ms]",{"opacity-0 scale-75":!j,"opacity-100 scale-100":j,"origin-top":"bottom"===g,"origin-top-right":"bottom-end"===g,"origin-bottom":"top"===g,"origin-bottom-right":"top-end"===g||"left"===g},o),children:h({open:C,close:P,toggle:T,isOpen:b},...t)}):null},[P,b,j,C,g,h,o,T]);return(0,r.jsx)("span",{...(0,s.v)("InteractiveTippy"),className:n,style:l,onClick:e=>!u&&e.stopPropagation(),children:(0,r.jsx)(f,{interactive:!0,...x,placement:g,render:I,ref:E,visible:b,children:"function"==typeof v?v({isOpen:b,open:C,close:P,toggle:T}):v})})}},34540:function(e,t,n){n.d(t,{V:function(){return o},c:function(){return l}});var r=n(48580);let a=(0,r.eE)()?"⌘":"Ctrl",l={openSearch:{name:"Open search",keys:[a,"K"]}},o={undo:{name:"Undo",keys:[a,"Z"],config:["z",{meta:(0,r.eE)(),ctrl:!(0,r.eE)()}]},redo:{name:"Redo",...(0,r.eE)()?{keys:[a,"⇧","Z"],config:["z",{meta:!0,shift:!0}]}:{keys:[a,"Y"],config:["y",{ctrl:!0,shift:!0}]}},selectMultiple:{name:"Select multiple",keys:[a,"⇧","Click"]},copy:{name:"Copy",keys:[a,"C"],config:["c",{meta:(0,r.eE)(),ctrl:!(0,r.eE)()}]},copyStepImage:{name:"Copy step image",keys:["Right click"]},paste:{name:"Paste",keys:[a,"V"]},deleteStep:{name:"Delete",keys:["⌫"],config:["Backspace"]},toggleVisibilityInNavigation:{name:"Toggle step visibility in navigation",keys:[a,"H"],config:["h",{meta:(0,r.eE)(),ctrl:!(0,r.eE)()}]},toggleStepAutoplay:{name:"Toggle step autoplay",keys:[a,"A"],config:["a",{meta:(0,r.eE)(),ctrl:!(0,r.eE)()}]},toggleVideo:{name:"Play/Pause video",keys:["Space"]},seekInVideo:{name:"Seek in video",keys:["<-","->"]}}},55265:function(e,t,n){var r=n(52322),a=n(10800),l=n(2784),o=n(64782);t.Z=(0,l.forwardRef)((e,t)=>{let{isOpen:n,Icon:l,onClick:i,className:s,readonly:u}=e;return(0,r.jsx)(o.zx,{ref:t,buttonType:o.qh.neutral,buttonSize:o.Ph.sm,onClick:i,className:(0,a.cn)("transition-all rounded-full w-8 h-8 p-0 flex text-white bg-gray-900/50 backdrop-blur-sm backdrop-blur-fix transform-gpu border-none items-center justify-center",s,u?"hover:bg-gray-900/50":"group/btn hover:bg-white",{"bg-white":n}),iconOnly:(0,r.jsx)(l,{className:(0,a.cn)("text-white group-hover/btn:text-gray-900",{"text-gray-900":n})})})})},23500:function(e,t,n){n.d(t,{ZP:function(){return D}});var r,a,l,o=n(52322),i=n(10800),s=n(38078),u=n(33919),c=n(25237),d=n.n(c),p=n(45374),f=n(93628),m=n(77726),h=n(84079),v=n(61319),g=n(73715),y=n(2784),x=n(53476),b=n(88676),w=n(95131),j=n(60097),k=n(55265),N=n(63002),E=n(49143),S=n(29497);let C=()=>(0,o.jsx)(S.Z,{placement:"top",text:"Autoplay enabled",children:(0,o.jsx)(k.Z,{isOpen:!1,Icon:b.Z,readonly:!0})}),P=e=>{let{step:t,tracker:n}=e,{updateStep:r}=(0,N.$)(),a=(e,a)=>{let l={enabled:!0,delay:e===w.A.manual?a||E.k0:void 0};r({...t,autoplay:l}),null==n||n.report("Step Autoplay Set",{mode:e})};return(0,o.jsx)(j.default,{placement:"right",appendTo:()=>document.body,render:()=>{var e;return(0,o.jsx)(w.Z,{className:"pl-3 pr-2 py-2 bg-white rounded-xl shadow",delay:null===(e=t.autoplay)||void 0===e?void 0:e.delay,onChange:a})},children:e=>{let{toggle:t,isOpen:n}=e;return(0,o.jsx)(S.Z,{placement:"top",text:"Change autoplay delay",disabled:n,children:(0,o.jsx)(k.Z,{isOpen:n,Icon:b.Z,onClick:t})})}})};var T=n(48580),I=n(54534),O=n(36577),M=n(3846),Z=n(20225),R=n(34002),L=n(97253),V=n(45203);function F(){return(F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=function(e){return y.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 92 32"},e),r||(r=y.createElement("rect",{width:56,height:6,x:18,fill:"currentColor",opacity:.3,rx:3})),a||(a=y.createElement("rect",{width:26,height:10,x:33,y:22,fill:"currentColor",opacity:.2,rx:5})),l||(l=y.createElement("rect",{width:92,height:4,y:10,fill:"currentColor",opacity:.25,rx:2})))};function B(e){let{className:t,isDark:n}=e;return(0,o.jsx)("div",{className:t,children:(0,o.jsx)("div",{className:(0,i.cn)("w-full h-full flex items-center justify-center",{"bg-gray-900/80":n,"bg-white/80":!n}),children:(0,o.jsx)(A,{className:(0,i.cn)("w-2/3",{"text-gray-900":!n,"text-white":n})})})})}let _=d()(()=>Promise.all([n.e(5338),n.e(9744)]).then(n.bind(n,39744)),{loadableGenerated:{webpack:()=>[39744]}}),z=e=>{let{isActive:t,stepIndex:n,children:r,style:a}=e;return(0,o.jsxs)("div",{className:(0,i.cn)("relative transition-colors rounded-full min-w-[32px] h-8 p-0 flex backdrop-blur-sm transform-gpu text-white items-center justify-center text-sm font-semibold",{"bg-primary-action":t,"bg-gray-900/50":!t}),style:a,children:[(0,o.jsx)("div",{className:"flex items-center justify-center min-w-[32px]",children:n+1}),r]})},H=e=>{let{type:t,step:n}=e;return t===u.StepType.Empty?null:(0,o.jsxs)("div",{className:"transition-all rounded-full w-8 h-8 p-0 flex text-white bg-gray-900/50 backdrop-blur-sm backdrop-blur-fix transform-gpu items-center justify-center",children:[t===u.StepType.Image&&(0,o.jsx)(f.Z,{className:"w-[18px] h-[18px]"}),t===u.StepType.Video&&(0,o.jsx)(v.Z,{className:"w-[18px] h-[18px]"}),n.type===u.StepType.Overlay&&(n.variant===u.OverlayVariant.Form?(0,o.jsx)(m.Z,{className:"w-[18px] h-[18px]"}):(0,o.jsx)(h.Z,{className:"w-[18px] h-[18px]"}))]})};function D(e){var t;let{tracker:n,step:r,isActive:a,className:l,onSelect:c,menu:d,stepIndex:f,displayType:m=!1,displaySize:h=!1,isInFlowNav:v=!1,isPlayable:g=!0}=e,{flow:b}=(0,I.u)(),w=(0,x.sJ)(M.H.activeVideoTarget),j=(0,x.sJ)(M.H.selectedHotspot),k=!!d,N=!!b.steps&&f===b.steps.length-1,{id:E,type:F}=r,A=(0,Z.Q)(r),[D,W]=(0,y.useState)(!1),[U,{startTime:X},{play:q,pause:J,seek:Q}]=(0,O.R)({muted:!0,startTimeFrac:(0,i.isVideoStep)(r)?(0,T.zB)(r,!1):void 0,endTimeFrac:(0,i.isVideoStep)(r)?(0,T.XB)(r,!1):void 0});return(0,y.useEffect)(()=>{D?q():(J(),Q({to:X}))},[D,q,J,Q,X]),(0,o.jsxs)("div",{...(0,R.v)("StepTile"),className:(0,i.cn)("_step-tile relative aspect-3/2 overflow-hidden rounded-lg bg-white flex items-center flex-shrink-0 content-center cursor-pointer object-top object-cover",l),style:{borderColor:(null==j?void 0:j.targetId)===E&&E===w?s.defaultUserPrefs.bgColor:""},onClick:()=>{null==c||c(r)},onMouseEnter:()=>F===u.StepType.Video&&g&&W(!0),onMouseLeave:()=>F===u.StepType.Video&&g&&W(!1),children:[(0,o.jsx)("div",{className:(0,i.cn)("transition-all absolute inset-0 border rounded-lg pointer-events-none",{"border-2 border-blue-600":a,"border-gray-900/[.12]":!a,"border-none":v}),style:{zIndex:(0,L.LM)(L.KN.StepBorder)}}),(F===u.StepType.Image||F===u.StepType.Video)&&(0,o.jsx)(V.Z,{className:(0,i.cn)("transition-all object-cover rounded-lg",{hidden:D}),src:A,layout:"fill",alt:(0,i.getStepName)(r,f),blurhash:(0,i.isImageStep)(r)?r.blurhash:void 0}),F===u.StepType.Video&&g?(0,o.jsx)(_,{register:U,wrapperClassName:(0,i.cn)("transition-all rounded-lg",{hidden:!D}),videoClassName:"aspect-3/2",step:r,inEditMode:!1,disableTracking:!1}):null,F===u.StepType.Overlay&&(0,o.jsx)(B,{isDark:r.theme===u.OverlayTheme.Dark,className:(0,i.cn)("transition-all absolute inset-0 rounded-lg overflow-hidden")}),F===u.StepType.Empty&&(0,o.jsx)("div",{className:(0,i.cn)("transition-all absolute inset-0 rounded-lg overflow-hidden")}),(d||void 0!==f||m||h)&&(0,o.jsxs)("div",{className:"min-h-full",children:[(void 0!==f||m||h)&&(0,o.jsxs)("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[void 0!==f&&(0,o.jsx)(z,{isActive:!!a,stepIndex:f,style:{backgroundColor:(null==j?void 0:j.targetId)===r.id?(null==j?void 0:j.bgColor)||s.defaultUserPrefs.bgColor:"",color:(null==j?void 0:j.targetId)===r.id?(null==j?void 0:j.textColor)||s.defaultUserPrefs.textColor:""},children:(0,o.jsx)(K,{step:r,isLastStep:N})}),m&&(0,o.jsx)(H,{type:F,step:r}),r.hiddenFromNavigation&&(0,o.jsx)(S.Z,{placement:"top",text:"Hidden from navigation",children:(0,o.jsx)("div",{className:"transition-all rounded-full w-8 h-8 p-0 flex text-white bg-gray-900/50 backdrop-blur-sm backdrop-blur-fix transform-gpu items-center justify-center",children:(0,o.jsx)(p.Z,{className:"w-[18px] h-[18px]"})})}),(0,i.stepSupportsAutoplay)(r)&&(null===(t=r.autoplay)||void 0===t?void 0:t.enabled)&&(k?(0,o.jsx)(P,{step:r,tracker:n}):(0,o.jsx)(C,{})),h&&(0,i.isMediaStep)(r)&&r.size&&r.size.width>0&&r.size.height>0&&(0,o.jsx)("div",{className:"transition-all rounded-full h-8 p-0 px-2 flex text-white text-sm font-semibold bg-gray-900/50 backdrop-blur-sm backdrop-blur-fix transform-gpu items-center justify-center",children:"".concat(r.size.width," x ").concat(r.size.height)})]}),d]})]})}function W(e){let{text:t}=e;return(0,o.jsx)(S.Z,{placement:"right",text:t,maxWidth:600,children:(0,o.jsx)("div",{"aria-label":"Warning",className:"transition-all rounded-full w-6 h-6 mr-1 -ml-0.5 flex text-gray-900/60 bg-yellow-600 items-center justify-center",children:(0,o.jsx)(g.Z,{className:"w-4 h-4"})})})}function K(e){var t;let{step:n,isLastStep:r}=e,{flow:a}=(0,I.u)(),l=(0,i.isStepMissingCustomVariables)(n,a.customVariables);return!(0,i.isImageStep)(n)||n.hotspots.length||r||(null===(t=n.autoplay)||void 0===t?void 0:t.enabled)||(0,i.selectFlowAutoplay)(a).enabled?(0,i.isVideoStep)(n)&&n.videoProcessing?(0,o.jsx)(W,{text:"Video is still processing. It may take a few minutes to complete."}):l?(0,o.jsx)(W,{text:(0,i.missingVariablesMessage)("This step")}):null:(0,o.jsx)(W,{text:"Without a hotspot or callout on this step, the user will not be able to progress past this step."})}},34904:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(52322),a=n(10800),l=n(27377),o=n(97253);function i(e){let{show:t,className:n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("fixed w-full h-full flex items-center justify-center bg-gray-900/50 group-hover/wrapper:bg-gray-900/20 group duration-300 pointer-events-none transition-all ease-jelly top-0 left-0",{"opacity-0 !transition-none":!t,"opacity-100":t},n),style:{zIndex:(0,o.LM)(o.KN.PlayButton)},"aria-label":"Play video",role:"button","aria-hidden":!t,children:(0,r.jsx)("div",{className:(0,a.cn)("rounded-full bg-white p-6 sm:p-10 shadow-menu z-10 transition-all ease-jelly duration-300 group-hover:scale-125"),"aria-hidden":!0,children:(0,r.jsx)(l.Z,{className:(0,a.cn)("w-10 h-10 sm:w-14 sm:h-14 text-gray-700 transition-all ease-jelly translate-x-0.5")})})})}},40286:function(e,t,n){n.d(t,{$P:function(){return d},d0:function(){return s}});var r=n(52322),a=n(13888),l=n.n(a),o=n(2784),i=n(48580);let s=e=>l()(e,["steps","themeId","font","flowWrapper","bgImage","showFlowNavIndicator","showStartOverlay","startOverlayButtonText"]),u=(0,o.createContext)({});function c(e){let{children:t}=e,n=(0,o.useRef)(new i.Nk),a=n.current;return(0,r.jsx)(u.Provider,{value:a,children:t})}t.ZP=u;let d=e=>t=>(0,r.jsx)(c,{children:(0,r.jsx)(e,{...t})})},63002:function(e,t,n){n.d(t,{$:function(){return h}});var r=n(52322),a=n(10800),l=n(33919),o=n(92642),i=n(2784),s=n(62202),u=n(36715),c=n(64782),d=n(34540),p=n(19293),f=n(40286),m=n(24495);function h(){let e=(0,u.Z)(),{dispatch:t,activeStep:n,flow:h}=(0,i.useContext)(p.i),v=(0,i.useCallback)(e=>t({type:"SET_ACTIVE_STEP",id:e}),[t]),g=(0,i.useContext)(f.ZP),y=(0,i.useRef)(n);y.current=n;let x=(0,i.useRef)(null),b=(0,i.useCallback)(()=>{x.current&&s.ZP.dismiss(x.current),x.current=null},[]),w=(0,m.h)("Library",{},{}),j=(0,i.useRef)(!1),k=(0,i.useCallback)(async()=>{if(!j.current&&g.hasPrevious())try{let t=g.getCurrent(),n=g.getPrevious();if(!n)return;b(),j.current=!0,v((null==t?void 0:t.beforeStepId)||null),await h.update(n.state,e.userId),w.report("Undo-Redo Triggered",{shortcut:!0,destination:"undo"}),j.current=!1}catch(e){(0,o.Tb)(e)}},[e.userId,h,b,g,v,w]),N=(0,i.useCallback)(async()=>{if(!j.current&&g.hasNext()){try{let t=g.getNext();if(!t)return;j.current=!0,v(t.afterStepId||null),await h.update(t.state,e.userId),w.report("Undo-Redo Triggered",{shortcut:!0,destination:"redo"})}catch(e){(0,o.Tb)(e)}j.current=!1}},[e.userId,h,g,v,w]),E=(0,i.useCallback)(async(t,n)=>{var r,a;let l=null===(r=y.current)||void 0===r?void 0:r.id;g.getCurrent()||g.add({state:(0,f.d0)(h),beforeStepId:l,afterStepId:l}),await h.update(t,e.userId);let o={state:(0,f.d0)(t),beforeStepId:l,afterStepId:n||(null===(a=y.current)||void 0===a?void 0:a.id)};g.add(o)},[e.userId,h,g]),S=(0,i.useCallback)(async e=>{let t=Array.isArray(e)?e[0]:e;if(!h||!t)return[];let r=(h.steps.length?h.steps.map(t=>t.id===(null==n?void 0:n.id)?e:t):[e]).flat();await E({steps:r},t.id),v(t.id)},[null==n?void 0:n.id,h,v,E]),C=(0,i.useCallback)(async function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(!h)return[];let i=h.steps.map(t=>e.find(e=>e.id===t.id)||t),s=e.filter(e=>!h.steps.find(t=>t.id===e.id)),u=r?h.steps.findIndex(e=>e.id===(null==n?void 0:n.id))+1:o>=0?o:h.steps.length,c=[...i.slice(0,u),...s.map(e=>(0,a.isMediaStep)(e)&&e.hotspots?{...e,hotspots:l?e.hotspots:[]}:e),...i.slice(u,h.steps.length)].filter(Boolean),d=(null==n?void 0:n.id)?void 0:null===(t=c[0])||void 0===t?void 0:t.id;return await E({steps:c},d),d&&v(d),c},[null==n?void 0:n.id,h,v,E]),P=(0,i.useCallback)(async e=>{Object.keys(e).forEach(t=>{void 0===e[t]&&delete e[t]});let t=h.steps.map(t=>t.id===e.id?e:t);await E({steps:t})},[h.steps,E]),T=(0,i.useCallback)(e=>{b(),(0,s.ZP)(t=>(x.current=t.id,(0,r.jsxs)("span",{children:[e,(0,r.jsxs)(c.zx,{buttonType:c.qh.secondary,buttonSize:c.Ph.sm,className:"ml-3 -mr-2 rounded-md border-none bg-white/[.16] hover:bg-white/[.24] active:bg-white/[.16] text-white pl-2 pr-1 group",onClick:()=>{s.ZP.dismiss(t.id),k()},children:["Undo",(0,r.jsx)("span",{className:"ml-1.5 rounded-md bg-gray-900/[.32] flex p-1 font-medium",children:d.V.undo.keys.join("")})]})]})),{className:"!rounded-lg !text-sm !font-medium !bg-gray-800 !text-white !px-1 !h-11 !shadow-[0px_4px_10px_rgba(17,_24,_39,_0.08)]"})},[b,k]),I=(0,i.useCallback)(async e=>{var t,r;if(!h)return;let o=h.steps,i=-1;e.forEach((e,t)=>{let n=o.findIndex(t=>t.id===e.id);if(0===t&&(i=n),-1===n)return;let r=n===(o.length||0)-1?0:n+1,l=o[r];function s(t){var n;return null!==(n=e.id===t?null==l?void 0:l.id:t)&&void 0!==n?n:null}o=o.filter(t=>t.id!==e.id).map(e=>(0,a.isVideoStep)(e)?{...e,targetId:s(e.targetId),...e.hotspots&&{hotspots:e.hotspots.map(e=>({...e,targetId:s(e.targetId)}))}}:(0,a.isImageStep)(e)?{...e,hotspots:e.hotspots.map(e=>({...e,targetId:s(e.targetId)}))}:(0,a.isOverlayStepWithPaths)(e)?{...e,paths:e.paths.map(e=>"step"===e.pathType?{...e,targetStepId:s(e.targetStepId)}:e)}:e)});let s=e.map(e=>e.id).includes((null==n?void 0:n.id)||"")&&o.length>0?null===(t=o[Math.max(0,i-1)])||void 0===t?void 0:t.id:void 0;s&&v(s),await E({steps:o},s);let u="".concat(e.length>1?"Steps":(null===(r=e[0])||void 0===r?void 0:r.type)===l.StepType.Overlay?"Overlay":"Step"," deleted");T(u)},[h,null==n?void 0:n.id,E,T,v]);return{replaceActiveStep:S,updateFlow:E,showUndoToast:T,addOrUpdateSteps:C,updateStep:P,deleteSteps:I,undo:k,redo:N}}},14609:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(2784);function a(e,t){let{delay:n,transformInput:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[l,o]=(0,r.useState)(e),i=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{o(e)},[e]);let s=(0,r.useCallback)(e=>{i.current&&(clearTimeout(i.current),i.current=void 0);let t="string"==typeof e?e:e.target.value;return a&&(t=a(t)),o(t),t},[a]),u=(0,r.useCallback)(e=>{let r=s(e);i.current=setTimeout(()=>t(r),null!=n?n:1e3)},[s,t,n]),c=(0,r.useCallback)(e=>{let n=s(e);t(n)},[s,t]);return[l,u,c]}},54554:function(e,t,n){n.d(t,{jX:function(){return a},pJ:function(){return p}});var r,a,l=n(2784),o=n(72489),i=n(48580),s=n(49143);let u=4*s.PK,c=2*s.PK,d=s.PK;function p(e){let{forceMuted:t}=e,n=(0,l.useRef)(new Map([])),r=(0,l.useRef)(0),a=(0,l.useRef)(s.mw),p=(0,l.useRef)(t),y=(0,l.useRef)(0),[x,b]=(0,l.useState)(0),[w,j]=(0,l.useState)(s.mw),[k,N]=(0,l.useState)(0),[E,S]=(0,l.useState)(0),[C,P]=(0,l.useState)(!1),T=(0,l.useCallback)(e=>{r.current=e,b(e)},[]),I=(0,l.useCallback)(e=>{for(let[,t]of(a.current=e,j(e),n.current))t.element.playbackRate=t.playbackRate*e},[]),O=(0,l.useCallback)(()=>{N(m(n.current))},[]);p.current=t,(0,l.useEffect)(()=>{for(let[,e]of n.current)e.element.muted=t||e.muted},[t]);let M=(0,l.useCallback)(e=>{if(y.current>=6)return!0;let t=g(e.element.buffered),n=e.element.currentTime,r=!1;for(let e=0;e<t.length;e++)t[e][0]<=n&&t[e][1]>=n&&(r=!0);return r},[]),Z=(0,l.useCallback)(e=>{if(y.current>=6)return!0;let t=g(e.element.buffered),n=e.element.currentTime,r=!1;for(let a=0;a<t.length;a++)if(t[a][0]<=n&&t[a][1]>=n){r=!0;let l=v(e.element.duration)*e.endTimeFrac-s.VF,o=l-n,i=u*e.element.playbackRate,d=y.current?(i-c)/(2*y.current):0,p=t[a][1]-n,f=Math.min(i-d,o);if(p<f)return!1}return r},[]),R=(0,l.useCallback)(()=>Array.from(n.current.values()).every(M),[M]),L=(0,l.useCallback)(()=>Array.from(n.current.values()).every(Z),[Z]),V=(0,l.useCallback)(()=>{let e=L(),t=R();S(n=>0===n?n:2===n&&t||e?2:1)},[L,R]),F=(0,l.useCallback)(()=>{let e=L(),t=R();S(n=>2===n&&t||e?2:1)},[L,R]),A=(0,l.useCallback)(()=>{S(0)},[]),B=(0,l.useCallback)(e=>{let t="to"in e?e.to:r.current+e.by;for(let[,e]of n.current)e.element.currentTime=h(t,e);let a=m(n.current);T(Math.min(t,a))},[T]),_=(0,l.useCallback)(async e=>{if(e.playPromise)await e.playPromise;else{var t;e.playPromise=null===(t=e.element.play())||void 0===t?void 0:t.catch(()=>{A()}),await e.playPromise,e.playPromise=null}},[A]),z=(0,l.useCallback)(e=>{var t,l,o,u,c,d;if(n.current.has(e.key)&&(e.element&&console.error("Source key already registered.",e.key),function(e){if(!n.current.has(e))return;let t=n.current.get(e);t.element.onplay=null,t.element.ondurationchange=null,t.element.onplaying=null,t.element.oncanplay=null,t.element.oncanplaythrough=null,t.element.onwaiting=null,t.element.onprogress=null,t.element.onsuspend=null,t.element.onstalled=null,t.element.pause(),n.current.delete(e);let a=m(n.current);r.current>a&&T(a),n.current.size||(y.current=0,A()),O(),V()}(e.key)),!e.element)return;let f={key:e.key,element:e.element,startTimeFrac:null!==(t=e.startTimeFrac)&&void 0!==t?t:s.Im,endTimeFrac:null!==(l=e.endTimeFrac)&&void 0!==l?l:s.rj,playbackRate:(0,i.RD)(null!==(o=e.playbackRate)&&void 0!==o?o:s.mw),offset:null!==(u=e.offset)&&void 0!==u?u:0,buffer:null!==(c=e.buffer)&&void 0!==c?c:0,muted:null!==(d=e.muted)&&void 0!==d&&d,playPromise:null};f.element.onplay=()=>P(!0),f.element.ondurationchange=O,f.element.onplaying=V,f.element.oncanplay=V,f.element.oncanplaythrough=V,f.element.onwaiting=V,f.element.onprogress=V,f.element.onsuspend=V,f.element.onstalled=V;let v=a.current*f.playbackRate,g=p.current||f.muted;f.element.currentTime=h(r.current,f)+.001,f.element.defaultMuted=g,f.element.muted=g,f.element.defaultPlaybackRate=v,f.element.playbackRate=v,n.current.set(e.key,f),O(),V()},[T,O,V,A]);(0,o.Z)(()=>{let e;if(2!==E){for(let[,e]of n.current)e.element.pause();return}let t=Date.now();return e=requestAnimationFrame(function l(){let o=Date.now(),i=(o-t)/1e3*a.current;t=o;let u=r.current,c=u+i,p=m(n.current);if(c>=p){A(),T(p),O(),e=void 0;return}for(let[,e]of(T(c),n.current)){var f;let t=v(e.element.duration)*e.startTimeFrac,n=v(e.element.duration)*e.endTimeFrac-s.VF,r=h(c,e),a=(f=e.element.currentTime)<=r+d&&f>=r-d;!a&&y.current<6&&(e.element.currentTime=r);let l=t<r&&e.element.currentTime<n;l&&e.element.paused?_(e):l||e.element.paused||e.element.pause()}e=requestAnimationFrame(l)}),()=>{e&&cancelAnimationFrame(e)}},[E,A,_,T,O,M]),(0,l.useEffect)(()=>{if(1!==E||y.current>=6)return;let e=null;return e=setTimeout(function t(){y.current++,6===y.current&&B({by:s.PK}),F(),y.current<6&&(e=setTimeout(t,5e3))},5e3),()=>{e&&clearTimeout(e)}},[E,B,F]);let H=(0,l.useMemo)(()=>({play:F,pause:A,seek:B,updatePlaybackRate:I}),[F,A,B,I]),D=(0,l.useMemo)(()=>{let e=new Map([]);if(x>=k)return e;for(let[,a]of n.current){var t,r;let n=f(a),l=a.offset+a.buffer,o=l+n,i=x>=l&&x<o,s=(t=l-a.buffer,r=o+a.buffer,x>=t&&x<r);s&&e.set(a.key,{time:h(x,a),duration:a.element.duration,inBuffer:!i})}return e},[x,k]),W=(0,l.useMemo)(()=>{var e;if(t)return!0;for(let[t]of D)if(!(null===(e=n.current.get(t))||void 0===e?void 0:e.muted))return!1;return!0},[D,t]);return[z,{status:E,duration:k,time:x,ended:!!k&&x>=k,everPlayed:C,muted:W,playbackRate:w,activeSourceState:D},H]}function f(e){return v(e.element.duration)*(e.endTimeFrac-e.startTimeFrac)/e.playbackRate}function m(e){let t=0;for(let[,n]of e){let e=f(n);e&&(t=Math.max(e+n.offset+2*n.buffer,t))}return t}function h(e,t){let n=f(t),r=t.offset+t.buffer,a=v(t.element.duration)*t.startTimeFrac,l=v(t.element.duration)*t.endTimeFrac;return e<=r?a:e>=r+n?l:(e-r)/n*(l-a)+a}function v(e){return isNaN(e)?0:e}function g(e){let t=[];if(!e.length)return t;t.push([e.start(0)-d,e.end(0)+d]);for(let n=1;n<e.length;n++){let r=e.start(n)-d,a=e.end(n)+d,l=t[t.length-1];r<=l[1]?l[1]=a:t.push([r,a])}return t}(r=a||(a={}))[r.Paused=0]="Paused",r[r.Buffering=1]="Buffering",r[r.Playing=2]="Playing"},36577:function(e,t,n){n.d(t,{R:function(){return i}});var r=n(2784),a=n(72489),l=n(48580),o=n(49143);function i(e){let{muted:t,playbackRate:n=o.mw,startTimeFrac:i=o.Im,endTimeFrac:u=o.rj}=e,c=(0,r.useRef)(null),[d,p]=(0,r.useState)(!0),[f,m]=(0,r.useState)(!1),[h,v]=(0,r.useState)(0),[g,y]=(0,r.useState)(0),x=(0,r.useMemo)(()=>(0,l.Ku)(i*h,6),[i,h]),b=(0,r.useMemo)(()=>(0,l.Ku)(u*h,6),[u,h]),w=(0,r.useRef)({muted:t,playbackRate:n,startTime:x});(0,r.useEffect)(()=>{w.current={muted:t,playbackRate:n,startTime:x}},[t,n,x]);let j=(0,r.useCallback)(e=>{if(c.current){var t;e&&console.error("Video already registered for ref. Ref will be updated but this is likely an error."),t=c.current,c.current===t&&(c.current.onplay=null,c.current.onpause=null,c.current.ontimeupdate=null,c.current.ondurationchange=null,c.current.pause(),c.current=null,p(!0),v(0),y(0));return}e&&(c.current=e,c.current.onplay=function(){p(!1),m(!0)},c.current.onpause=function(){p(!0)},c.current.ontimeupdate=function(){c.current&&y(c.current.currentTime)},c.current.ondurationchange=function(){c.current&&v(s(c.current.duration))},c.current.currentTime=w.current.startTime,c.current.muted=w.current.muted,c.current.defaultMuted=w.current.muted,c.current.defaultPlaybackRate=(0,l.RD)(w.current.playbackRate),c.current.playbackRate=(0,l.RD)(w.current.playbackRate),p(c.current.paused),v(s(c.current.duration)),y(c.current.currentTime))},[]),k=(0,r.useRef)(null),N=(0,r.useCallback)(async()=>{if(c.current){if(k.current)await k.current;else{var e;k.current=null===(e=c.current.play())||void 0===e?void 0:e.catch(()=>{}),await k.current,k.current=null}}},[]),E=(0,r.useCallback)(()=>{c.current&&c.current.pause()},[]),S=(0,r.useCallback)(e=>{if(c.current){let t="to"in e?e.to:c.current.currentTime+e.by;c.current.currentTime=t,y(t)}},[]);(0,r.useEffect)(()=>{c.current&&(c.current.muted=t)},[t]),(0,r.useEffect)(()=>{c.current&&(c.current.playbackRate=(0,l.RD)(n))},[n]);let C=!!h&&g>=b-o.VF;(0,a.Z)(()=>{let e;if(c.current&&!d)return e=requestAnimationFrame(function t(){if(c.current){if(c.current.currentTime<x)S({to:x}),e=requestAnimationFrame(t);else if(c.current.currentTime>b)E(),S({to:b}),e=void 0;else{var n;y(null===(n=c.current)||void 0===n?void 0:n.currentTime),e=requestAnimationFrame(t)}}else e=void 0}),()=>{e&&cancelAnimationFrame(e)}},[x,b,d,E,S]);let P=(0,r.useMemo)(()=>({play:N,pause:E,seek:S}),[N,E,S]);return[j,{paused:d,duration:h,time:g,startTime:x,endTime:b,everPlayed:f,ended:C},P]}function s(e){return isNaN(e)?0:e}}}]);